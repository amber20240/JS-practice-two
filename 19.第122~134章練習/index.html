<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
    <h2>（一）假裝後端的資料 JSON 格式 </h2>
    <p class="p1"></p>
</body>
</html>
<script>

  //01:20 
  // XML 流程
  // XML 看狀態單字 XML.responseText XML.readyState XML.
  // 在 netWork

  // const xhr= new XMLHttpRequest();
  //  向伺服器請求一個可延伸的標記與語言
  // xhr.open("get","url",false)
  //  設定一個xhr,open("get","url",false)
  //  grt取得資料  
  //  false 同步  true 非同步
  //  false 等撈到後端資料才開始跑ｊｓ下面的資料
  //  true 非同步沒有等撈到資料就繼續跑JS下面的code
  // xhr.send(null)
  // 傳送資料給後端,但因為我們現在要取值,所以是null

  // readyState 順序
    // 0 const xhr=newXMLHttpsRequest(); 請求伺服器建立一個可延伸的標記語言
    // 1 xhr.open("get","url",false) ; 設定一個 xhr.open("get","url",false)
    // 2 xhr.send(null);偵測資料以傳送給後端
    // 3 loading
    // 4 拿到資料

    // 先取到值
  const p1=document.querySelector(".p1");
  const xhr = new XMLHttpRequest();
  xhr.open("get","https://hexschool.github.io/ajaxHomework/data.json",false);
  xhr.send(null);
  const array1=JSON.parse(xhr.responseText);
  console.log(array1);
  function addtext (){
    console.log(array1[0].name);
    p1.textContent=array1[0].name;
    console.log(xhr.readyState);
  }
  addtext();
    // 觀察readyState 
</script>